import{A as S,d as A,_ as C}from"./index-DWJF4vuV.js";import{ai as N,bw as V,v as b,x as E,y as z,aB as F}from"./antdv-CAXihDg_.js";import{d as L,f as p,c as U,W as $,a5 as G,a6 as y,k as l,Y as d,G as x,F as M,a7 as P,a8 as W}from"./vue-Dbi1xauY.js";const Y=c=>(P("data-v-204de9e8"),c=c(),W(),c),j={style:{"--border":1},class:"header"},q=Y(()=>y("div",{class:"title"},"组织架构",-1)),H=L({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(c,{emit:g}){const _=g,i=p(""),r=p([]),s=p([]),m=p(!0),v=U(()=>f(N(r.value),i.value)),f=(t,e="")=>t.filter(n=>{var a,o;return(a=n.children)!=null&&a.length&&(n.children=f(n.children,e),n.children.length)?!0:(o=n.name)==null?void 0:o.includes(e)}),D=async()=>{r.value=await S.systemDept.deptList({}),s.value=[...s.value,...r.value.map(t=>Number(t.id))],_("init",r.value)},T=t=>{_("select",t[0])},h=(t,e=[])=>t.reduce((n,a)=>{var o;return n.push(a.id),(o=a.children)!=null&&o.length&&h(a.children,n),n},e),k=()=>{s.value=h(v.value)},w=t=>{s.value=t,m.value=!1};return D(),(t,e)=>{const n=V,a=A,o=b,K=E,B=z,I=F;return $(),G(M,null,[y("div",j,[q,l(n,{value:i.value,"onUpdate:value":e[0]||(e[0]=u=>i.value=u),size:"small",placeholder:"搜索"},null,8,["value"]),l(B,null,{overlay:d(()=>[l(K,null,{default:d(()=>[l(o,{onClick:k},{default:d(()=>[x(" 展开全部 ")]),_:1}),l(o,{onClick:e[1]||(e[1]=u=>s.value=[])},{default:d(()=>[x(" 折叠全部 ")]),_:1})]),_:1})]),default:d(()=>[l(a,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),l(I,{expandedKeys:s.value,"onUpdate:expandedKeys":e[2]||(e[2]=u=>s.value=u),"auto-expand-parent":m.value,"tree-data":v.value,"field-names":{key:"id",title:"name"},onSelect:T,onExpand:w},null,8,["expandedKeys","auto-expand-parent","tree-data"])],64)}}}),R=C(H,[["__scopeId","data-v-204de9e8"]]);export{R as default};
