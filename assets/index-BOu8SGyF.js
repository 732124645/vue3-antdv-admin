import{g as c,f as b,t as x}from"./columns-6S_YbOKO.js";import{ap as _,aq as C,ar as k,U as T,e as v,ae as R,al as p,ac as q}from"./antdv-CAXihDg_.js";import{k as o,G as d,d as E,f as F,c as O,W as U,a5 as V,Y as s,u as n}from"./vue-Dbi1xauY.js";import{u as j}from"./dynamic-table-DhiAq_hs.js";import"./index-DWJF4vuV.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-IWTYr-Fy.js";import{w as g}from"./common-FuI8P1Oj.js";import"./schema-form.vue_vue_type_script_setup_true_lang-C0d9vjpU.js";import"./is-C0dFuREE.js";import"./index-CCwlABZW.js";import"./dateUtil-NBcmMhwL.js";const D=[{title:"姓名",dataIndex:"name",sorter:!0,defaultEditable:!0,editable:({index:e})=>e>0,formItemProps:{defaultValue:"李白",rules:[{required:!0,message:"请输入姓名"}]},editFormItemProps:{extendSearchFormProps:!1,rules:[{required:!0,message:"请输入姓名"}]}},{title:"性别",dataIndex:"gender",formItemProps:{component:"Select",componentProps:({formInstance:e,formModel:t})=>({options:[{label:"男",value:1},{label:"女",value:0}],onChange(){e==null||e.updateSchema({field:"clothes",componentProps:{options:c(t.gender)}}),t.clothes=""}})},editFormItemProps:{extendSearchFormProps:!0,rules:[{required:!0,type:"number",message:"请选择性别"}],componentProps:({formInstance:e,formModel:t,tableRowKey:l})=>({onChange(){e==null||e.updateSchema({field:`${l}.clothes`,componentProps:{options:c(t.gender)}}),t.clothes=""}})},customRender:({record:e})=>["女","男"][e.gender]},{title:"衣服",dataIndex:"clothes",formItemProps:{component:"Select",componentProps:({formModel:e})=>({options:c(e.gender)})}},{title:"图片",dataIndex:"img",hideInSearch:!0,formItemProps:{component:"Upload",defaultValue:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],componentProps:{maxCount:1,listType:"picture-card",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},componentSlots:({formModel:e})=>({default:()=>{var t;return(t=e.img)!=null&&t.length?"":o("div",null,[o(_,null,null),o("div",{class:"mt-8px"},[d("Upload")])])}})},customRender:({record:e})=>o(C,{width:100,src:e.img},null)},{title:"价格",dataIndex:"price",editFormItemProps:{component:"InputNumber",rules:[{required:!0,message:"请输入价格！"}]},customRender:({record:e})=>`${e.price}元`},{title:"状态",dataIndex:"status",formItemProps:{component:"Select",componentProps:({formInstance:e,schema:t})=>({showSearch:!0,filterOption:!1,request:()=>b(),onSearch:k(async l=>{t.value.loading=!0;const i={field:t.value.field,componentProps:{options:[]}};e==null||e.updateSchema([i]);const m=await b(l).finally(()=>t.value.loading=!1);i.componentProps.options=m,e==null||e.updateSchema([i])},500),onChange(l){}})},editFormItemProps:{rules:[{required:!0,type:"number",message:"请选择状态"}]},customRender:({record:e})=>o(T,{color:e.status==1?"red":"default"},{default:()=>[["已售罄","热卖中"][e.status]]})}],Y=E({name:"EditRowTable",__name:"index",setup(e){const[t]=j(),l=F("cell"),i=async a=>(await g(500),{...a,items:x}),m=O(()=>[...D,{title:"操作",hideInTable:l.value==="cell",width:200,dataIndex:"ACTION",actions:({record:a},r)=>{const{startEditable:u,cancelEditable:h,isEditable:P,getEditFormModel:f,validateRow:S}=r;return P(a.id)?[{label:"保存",onClick:async()=>{await S(a.id),v.loading({content:"保存中...",key:a.id}),f(a.id),await g(2e3),h(a.id),v.success({content:"保存成功!",key:a.id,duration:2})}},{label:"取消",onClick:()=>{h(a.id)}}]:[{label:"编辑",onClick:()=>{u(a.id,a)}}]}}]),w=(a,r,u)=>{},y=async(a,r,u)=>{await g(2e3)};return(a,r)=>(U(),V("div",null,[o(n(R),{message:"可编辑行表格",type:"info","show-icon":""},{description:s(()=>[d(" 可编辑行表格-可编辑行表格使用示例 ")]),_:1}),o(n(q),{title:"可编辑行表格基本使用示例",style:{"margin-top":"20px"}},{default:s(()=>[o(n(t),{size:"small",bordered:"","data-request":i,columns:m.value,"editable-type":l.value,"on-save":y,"on-cancel":w,"row-key":"id"},{toolbar:s(()=>[o(n(p),{ref:"select",value:l.value,"onUpdate:value":r[0]||(r[0]=u=>l.value=u)},{default:s(()=>[o(n(p).Option,{value:"single"},{default:s(()=>[d("单行编辑")]),_:1}),o(n(p).Option,{value:"multiple"},{default:s(()=>[d("多行编辑")]),_:1}),o(n(p).Option,{value:"cell"},{default:s(()=>[d("可编辑单元格")]),_:1})]),_:1},8,["value"])]),_:1},8,["columns","editable-type"])]),_:1})]))}});export{Y as default};
